{
  "hash": "a315625f7957fc866c97887d68b30279",
  "result": {
    "markdown": "---\ntitle: \"#RStats Wrapped 2023\"\nauthor: \"Patrick Coyle\"\ndate: today\ncategories: [code, analysis]\n# image: \"\"\n---\n\n\nSource: <https://nrennie.rbind.io/blog/2022-12-03-how-to-make-your-own-rstats-wrapped/>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(NCmisc)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'NCmisc' was built under R version 4.3.2\n```\n:::\n\n```{.r .cell-code}\nlibrary(janitor)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'janitor' was built under R version 4.3.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'janitor'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n```\n:::\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(purrr)\nlibrary(patchwork)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'patchwork' was built under R version 4.3.2\n```\n:::\n\n```{.r .cell-code}\nlibrary(showtext)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: sysfonts\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: showtextdb\n```\n:::\n\n```{.r .cell-code}\nlibrary(here)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nhere() starts at C:/Users/Patrick/Documents/R_projects/quarto_blog_coyle\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggtextures) ## devtools::install_github(\"clauswilke/ggtextures\")\nlibrary(ggplot2)\nlibrary(stringr)\nall_functions <- list.files(\n  path = \"C:/Users/Patrick/Documents/R_projects\", \n  recursive = TRUE,\n  full.names = TRUE\n) %>%\n  as_tibble() %>%\n  mutate(filetype = str_extract(value, pattern = \"\\\\..*\")) %>%\n  filter(filetype == \".R\") %>%\n  pull(value) %>% \n  map(~.x %>% \n        NCmisc::list.functions.in.file() %>% \n        .[setdiff(names(.), \"package:base\")]\n  )\nfunc_data <- all_functions %>% \n  unlist() %>% \n  unname() %>% \n  tabyl() %>% \n  as_tibble() %>% \n  rename(func = \".\") %>% \n  slice_max(n, n = 5, with_ties = FALSE) \nimgs <- tibble(img = c(\"https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/here.png\",\n                       \"https://raw.githubusercontent.com/rstudio/hex-stickers/main/thumbs/purrr.png\",\n                       \"https://raw.githubusercontent.com/rstudio/hex-stickers/main/thumbs/dplyr.png\",\n                       \"https://raw.githubusercontent.com/rstudio/hex-stickers/main/thumbs/quarto.png\",\n                       \"https://raw.githubusercontent.com/rstudio/hex-stickers/main/thumbs/ggplot2.png\"))\nfont_add_google(\"Raleway\", \"raleway\")\nshowtext_auto()\nset.seed(2023)\ncurve1 <- tibble(x = 1:100) %>%\n  mutate(y = 20 + smooth(cumsum(rnorm(100))))\ninset1 <- ggplot(data = curve1, aes(x = x, y = y)) +\n  geom_area(fill = \"#f76ec0\") +\n  theme_void() +\n  coord_fixed() +\n  scale_y_reverse()\np <- ggplot() +\n  # add text with the numbers 1 to 5\n  geom_text(data = data.frame(),\n            mapping = aes(x = rep(1, 5),\n                          y = 1:5,\n                          label = paste0(\"#\", 1:5)),\n            colour = \"#1a2e72\",\n            size = 20,\n            fontface = \"bold\",\n            family = \"raleway\") +\n  # add text with the names of the functions, and the number of times its used\n  geom_text(data = func_data,\n            mapping = aes(x = rep(2.15, 5),\n                          y = 1:5,\n                          label = paste0(func, \"() (\", n, \")\")),\n            colour = \"#143b1c\",\n            hjust = 0,\n            size = 10,\n            fontface = \"bold\",\n            family = \"raleway\") +\n  # add images for each package\n  geom_textured_rect(data = imgs,\n                     aes(xmin = rep(1.4, 5), xmax = rep(2, 5),\n                         ymax = 1:5-0.346, ymin = 1:5+0.346, image = img),\n                     lty = \"blank\",\n                     fill=\"transparent\",\n                     nrow = 1,\n                     ncol = 1,\n                     img_width = unit(1, \"null\"),\n                     img_height = unit(1, \"null\"),\n                     position = \"identity\")  +\n  # add title using geom_text() instead of labs()\n  geom_text(data = data.frame(),\n            aes(x = 2.45, y = 0, label = \"My Top Functions\"),\n            colour = \"#1a2e72\",\n            fontface = \"bold\",\n            hjust = 0.5,\n            size = 14,\n            family = \"raleway\") +\n  # set axis limits and reverse y axis\n  scale_x_continuous(limits = c(0.9, 4)) +\n  scale_y_reverse(limits = c(5.5, -0.2)) +\n  # add a caption\n  labs(caption = \"#RStats\") +\n  # set the theme\n  theme_void() +\n  theme(plot.background = element_rect(fill = \"#96efb7\", colour = \"#96efb7\"),\n        panel.background = element_rect(fill = \"#96efb7\", colour = \"#96efb7\"),\n        plot.margin = margin(40, 15, 10, 15),\n        plot.caption = element_text(colour = \"#1a2e72\",\n                                    margin = margin(t = 15),\n                                    face = \"bold\",\n                                    hjust = 1,\n                                    size = 30,\n                                    family = \"raleway\"))\np + \n  inset_element(inset1, left = -1, right = 1.2, bottom = 0, top = 2.2, align_to = \"full\") &\n  theme(plot.background = element_rect(fill = \"#96efb7\", colour = \"#96efb7\"),\n        panel.background = element_rect(fill = \"#96efb7\", colour = \"#96efb7\"),\n        plot.margin = margin(40, 7, 5, 7),\n        plot.caption = element_text(colour = \"#1a2e72\",\n                                    margin = margin(t = 5),\n                                    face = \"bold\",\n                                    hjust = 1,\n                                    size = 30))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=240}\n:::\n\n```{.r .cell-code}\nggsave(\"rstats_wrapped_2023.png\", width = 2.5, height = 5, units = \"in\")\n```\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}