{
  "hash": "44a444012cfd09bc7f39096d79963585",
  "result": {
    "markdown": "---\ntitle: \"Introduction to mermaid.js\"\nauthor: \"Patrick Coyle\"\ndate: \"2023-04-30\"\ncategories: [news, code, analysis]\nimage: \"mermaid.png\"\nexecute:\n  echo: true\n  warning: false\n  error: false\n  message: false\n---\n\n\n<!-- https://unpkg.com/mermaid@0.5.3/dist/www/all.html#mermaid -->\n\n`mermaid.js` is a Javascript library that allows you to create diagrams by writing \"Markdown-ish syntax.\" It has [native support in Quarto](https://quarto.org/docs/authoring/diagrams.html):\n\n\n```{mermaid}\ngraph LR\nA[Hard edge] --> B(Round edge)\nB --> C{Decision}\nC --> D[Result one]\nC --> E[Result two]\n```\n\n\nHere is mermaid template for the 2023 NBA Playoffs (excluding the play-in tournament)[^note1]\n\n[^note1]: `DiagrammeR::mermaid()` does not appear to support every Mermaid diagram syntax, such as flowcharts. But the flowchart syntax can be manually entered into a Quarto mermaid code chunk.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr, warn.conflicts = FALSE) # to load the magrittr pipe\nmy_mmd <- \"playoffs_template1.mmd\" %>%\n  readLines(warn = F) \nmy_mmd %>%\n  paste(collapse = \"\\n\") %>%\n  DiagrammeR::mermaid()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-d6089b81a83751c1bb6e\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-d6089b81a83751c1bb6e\">{\"x\":{\"diagram\":\"  graph LR\\n  E1 --> ES1\\n  E8 --> ES1\\n  E4 --> ES4\\n  E5 --> ES4\\n  E2 --> ES2\\n  E7 --> ES2\\n  E3 --> ES3\\n  E6 --> ES3\\n  ES1 --> EF1\\n  ES4 --> EF1\\n  ES2 --> EF2\\n  ES3 --> EF2\\n  EF1 --> EC\\n  EF2 --> EC\\n  EC --> C\\n  W1 --> WS1\\n  W8 --> WS1\\n  W4 --> WS4\\n  W5 --> WS4\\n  W2 --> WS2\\n  W7 --> WS2\\n  W3 --> WS3\\n  W6 --> WS3\\n  WS1 --> WF1\\n  WS4 --> WF1\\n  WS2 --> WF2\\n  WS3 --> WF2\\n  WF1 --> WC\\n  WF2 --> WC\\n  WC --> C\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nWe can progammatically edit this template with data about the teams and games:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(stringr)\nseed_xwalk <- read_csv(\"nba_2023_seed_xwalk.csv\", na = \"\")\nhelper1_20230423 <- function (mmd) {\n  mmd[-1] %>%\n  str_trim() %>% \n  str_split(\" --> \", simplify = T) %>% \n  as_tibble() %>% \n  setNames(c(\"From\", \"To\")) %>% \n  left_join(seed_xwalk, by = c(\"From\" = \"seed\")) %>% \n  transmute(\n    new_edges = paste0(\"  \", \n                       case_when(!is.na(team_stub) ~ team_stub, T ~ From), \n                       \" --> \", \n                       To)\n  ) %>% \n  pull(new_edges) %>% \n  c(mmd[1], .) \n}\nmy_mmd %>% \n  helper1_20230423() %>% \n  paste(collapse = \"\\n\") %>%\n  DiagrammeR::mermaid()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-71a9fa5548c20f224f87\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-71a9fa5548c20f224f87\">{\"x\":{\"diagram\":\"  graph LR\\n  MIL --> ES1\\n  MIA --> ES1\\n  CLE --> ES4\\n  NYK --> ES4\\n  BOS --> ES2\\n  ATL --> ES2\\n  PHI --> ES3\\n  BKN --> ES3\\n  ES1 --> EF1\\n  ES4 --> EF1\\n  ES2 --> EF2\\n  ES3 --> EF2\\n  EF1 --> EC\\n  EF2 --> EC\\n  EC --> C\\n  DEN --> WS1\\n  MIN --> WS1\\n  PHX --> WS4\\n  LAC --> WS4\\n  MEM --> WS2\\n  LAL --> WS2\\n  SAC --> WS3\\n  GSW --> WS3\\n  WS1 --> WF1\\n  WS4 --> WF1\\n  WS2 --> WF2\\n  WS3 --> WF2\\n  WF1 --> WC\\n  WF2 --> WC\\n  WC --> C\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/d3-3.3.8/d3.min.js\"></script>\r\n<script src=\"../../site_libs/dagre-0.4.0/dagre-d3.min.js\"></script>\r\n<link href=\"../../site_libs/mermaid-0.3.0/dist/mermaid.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/mermaid-0.3.0/dist/mermaid.slim.min.js\"></script>\r\n<link href=\"../../site_libs/DiagrammeR-styles-0.2/styles.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/chromatography-0.1/chromatography.js\"></script>\r\n<script src=\"../../site_libs/DiagrammeR-binding-1.0.9/DiagrammeR.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}